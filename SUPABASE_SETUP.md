# Supabase Setup for Life Dashboard

## Current Status
- ‚ùå No Supabase project configured yet
- üìÅ Currently using JSON files for data persistence:
  - `mood_data.json`
  - `decisions.json`  
  - `ideas.json`

---

## What Nick Needs to Do

### Step 1: Create a Free Supabase Account

1. Go to **[supabase.com](https://supabase.com)**
2. Click "Start your project" ‚Üí Sign up with GitHub (easiest)
3. Confirm your email if needed

### Step 2: Create a New Project

1. After login, click "New Project"
2. Fill in the details:
   - **Organization**: Select your GitHub account or create new
   - **Name**: `life-dashboard` (or whatever you prefer)
   - **Database Password**: Create a strong password (save this!)
   - **Region**: `US East (N. Virginia)` or closest to you
3. Click "Create new project"
4. **Wait 1-2 minutes** for it to spin up

### Step 3: Get API Credentials

Once the project is ready:

1. Click **Project Settings** (gear icon ‚öôÔ∏è) ‚Üí **API**
2. Copy these values:
   - **Project URL** (looks like: `https://xxxxx-xxxxx.supabase.co`)
   - **anon public** key (under "Project API keys")

### Step 4: Create Database Tables

In the Supabase dashboard, go to **SQL Editor** and run this script:

```sql
-- Create mood_entries table
CREATE TABLE mood_entries (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    mood TEXT NOT NULL,
    note TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Create decisions table
CREATE TABLE decisions (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    decision TEXT NOT NULL,
    context TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Create ideas table
CREATE TABLE ideas (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    idea TEXT NOT NULL,
    context TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Enable Row Level Security (RLS) - optional but recommended
ALTER TABLE mood_entries ENABLE ROW LEVEL SECURITY;
ALTER TABLE decisions ENABLE ROW LEVEL SECURITY;
ALTER TABLE ideas ENABLE ROW LEVEL SECURITY;

-- Create policies to allow public access (for your app)
CREATE POLICY "Allow public access" ON mood_entries FOR ALL USING (true) WITH CHECK (true);
CREATE POLICY "Allow public access" ON decisions FOR ALL USING (true) WITH CHECK (true);
CREATE POLICY "Allow public access" ON ideas FOR ALL USING (true) WITH CHECK (true);
```

Click **Run** to execute.

---

## What Happens Next (After Nick Provides Credentials)

Once Nick gives me the Supabase URL and anon key, I'll:

1. Add `supabase` to `requirements.txt`
2. Update `streamlit_app.py` to:
   - Load Supabase credentials from `st.secrets`
   - Replace JSON file functions with Supabase calls
   - Keep JSON fallback for local development
3. Test locally
4. Push changes to GitHub

---

## Credentials Needed from Nick

Please provide these two values (DM or paste them somewhere I can see):

| Credential | Example |
|------------|---------|
| **Supabase URL** | `https://abc123-xyz789.supabase.co` |
| **anon public key** | `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...` |

---

## Alternative: Give Me Edit Access

If you want me to do everything:
1. Go to **Project Settings** ‚Üí **Members**
2. Invite: `nick@openclaw.com` (or your email)
3. Role: **Developer**

Then I can create the tables and get the keys myself.
