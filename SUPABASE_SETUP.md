# Supabase Setup for Life Dashboard

## âœ… Connected!

The app is now configured to use Supabase. It falls back to JSON files if Supabase is unavailable.

---

## Database Tables Required

Make sure these tables exist in your Supabase project:

```sql
-- Create mood_entries table
CREATE TABLE mood_entries (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    mood TEXT NOT NULL,
    note TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Create decisions table
CREATE TABLE decisions (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    decision TEXT NOT NULL,
    context TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Create ideas table
CREATE TABLE ideas (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    idea TEXT NOT NULL,
    context TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Enable RLS (optional)
ALTER TABLE mood_entries ENABLE ROW LEVEL SECURITY;
ALTER TABLE decisions ENABLE ROW LEVEL SECURITY;
ALTER TABLE ideas ENABLE ROW LEVEL SECURITY;

-- Allow public access
CREATE POLICY "Allow public access" ON mood_entries FOR ALL USING (true) WITH CHECK (true);
CREATE POLICY "Allow public access" ON decisions FOR ALL USING (true) WITH CHECK (true);
CREATE POLICY "Allow public access" ON ideas FOR ALL USING (true) WITH CHECK (true);
```

---

## Streamlit Cloud Secrets

Add these to your Streamlit Cloud app secrets:

```toml
SUPABASE_URL = "https://xyeqihakfhwzphannakv.supabase.co"
SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh5ZXFpaGFrZmh3enBoYW5uYWt2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzMzkzNjMsImV4cCI6MjA4NjkxNTM2M30.C7wgyNJKCK2FeIP6ZbQ9U_aL02179FMFXF0HjmSR4OE"
```

---

## Local Development

For local development, create a `.env` file:

```bash
SUPABASE_URL=https://xyeqihakfhwzphannakv.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh5ZXFpaGFrZmh3enBoYW5uYWt2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzMzkzNjMsImV4cCI6MjA4NjkxNTM2M30.C7wgyNJKCK2FeIP6ZbQ9U_aL02179FMFXF0HjmSR4OE
```

The app will use JSON files as fallback if Supabase credentials are not available.
